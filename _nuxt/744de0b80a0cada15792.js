(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{144:function(t,a,n){var s=n(149);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,n(23).default)("64ff70ac",s,!0,{})},148:function(t,a,n){"use strict";var s=n(144);n.n(s).a},149:function(t,a,n){(t.exports=n(22)(!1)).push([t.i,"\n.diagram[data-v-06d7c82a]{overflow-x:scroll;background:#fff;will-change:transform\n}\n.diagram table[data-v-06d7c82a]{border-collapse:collapse;will-change:transform\n}\n.diagram td[data-v-06d7c82a]{padding:4px 3px;font-size:13px;border-top:1px solid #ccc;min-width:20px;text-align:center\n}\ntd.week[data-v-06d7c82a]{border-left:1px solid #ebebeb;text-align:left;padding-left:5px\n}\ntd.holiday[data-v-06d7c82a]{background:#ebebeb\n}\ntd.job[data-v-06d7c82a]{background:#219196\n}\ntd.today[data-v-06d7c82a]{background:#666!important;color:#fff;border-bottom:1px solid #666\n}\n.category td[data-v-06d7c82a]{background:#647d9b;color:#fff;font-size:14px;padding:5px;text-align:left\n}\ntd.name[data-v-06d7c82a]{min-width:200px;position:-webkit-sticky;position:sticky;left:0;background:hsla(0,0%,100%,.8)\n}\ntd.descr[data-v-06d7c82a]{padding:5px;text-align:left\n}\ntd.date[data-v-06d7c82a]{min-width:100px\n}\ntd.spacer[data-v-06d7c82a]{background:#fff\n}\ntd.done[data-v-06d7c82a]{background:#9adcbb\n}\ntd.done[data-v-06d7c82a],td.progress[data-v-06d7c82a]{white-space:nowrap;color:#000\n}\ntd.progress[data-v-06d7c82a]{background:#fff7ae\n}\ntd.waiting[data-v-06d7c82a]{background:#d0d0d0;white-space:nowrap;color:#000\n}\ntd.check-btn[data-v-06d7c82a]{padding:0\n}\ntd.check-btn .v-btn[data-v-06d7c82a]{margin:0;color:green\n}",""])},153:function(t,a,n){"use strict";var s=n(156),e={props:["data"],computed:{jobs:function(){return this.data.sort(function(t,a){return a.startDate-t.finishDate}).map(function(t){var a=s.DateTime.fromMillis(t.startDate),n=s.DateTime.fromMillis(t.finishDate),e=s.DateTime.local();return t.startISO=a.toISO(),t.finishISO=n.toISO(),n=n.plus({days:1}),t.interval=s.Interval.fromDateTimes(a,n),t.days=t.interval.count("days"),t.status=null,e<a&&(t.status="waiting"),e>n&&(t.status="done"),t.interval.contains(e)&&(t.status="progress"),t})},interval:function(){var t=Math.min.apply(Math,this.data.map(function(t){return t.startDate})),a=s.DateTime.fromMillis(t).startOf("week").plus({days:1}),n=Math.max.apply(Math,this.data.map(function(t){return t.finishDate})),e=s.DateTime.fromMillis(n).endOf("week").plus({days:1}),i=s.Interval.fromDateTimes(a,e);return i},weeks:function(){return this.interval.splitBy({weeks:1}).map(function(t){return t.start.toISO()})},days:function(){return this.interval.splitBy({days:1}).map(function(t){return t.start.toISO()})}},mounted:function(){this.scrollToday()},methods:{isHoliday:function(t){var a=s.DateTime.fromISO(t).weekday;if(1===a||7===a)return!0},isJob:function(t,a){var n=s.DateTime.fromISO(t),e=s.DateTime.local();return!!a.interval.contains(n)&&(a.interval.contains(e)&&n>e?"job progress":n<e?"job done":"job waiting")},isToday:function(t){var a=s.DateTime.fromISO(t).minus({days:1});return s.DateTime.local().hasSame(a,"day")},scrollToday:function(){var t=this;this.$nextTick(function(){var a=t.$el.querySelector(".today");t.$refs.diagram.scrollLeft=a.offsetLeft-700})}},data:function(){return{statuses:{progress:"В процессе",done:"Завершено",waiting:"Ожидает"}}}},i=(n(148),n(3)),o=Object(i.a)(e,function(){var t=this,a=t.$createElement,n=t._self._c||a;return t.data&&t.data.length>0?n("div",{ref:"diagram",staticClass:"diagram"},[n("table",[n("thead",[n("tr",[n("td",{attrs:{colspan:"5"}}),t._v(" "),t._l(t.weeks,function(a,s){return n("td",{key:a,staticClass:"week",attrs:{colspan:"7"}},[n("div",[t._v(t._s(s+1)+" неделя")]),t._v(" "),n("small",[t._v(t._s(t._f("luxon:locale")(a,"d m yyyy")))])])})],2),t._v(" "),n("tr",[n("td",{attrs:{colspan:"5"}}),t._v(" "),t._l(t.days,function(a){return n("td",{key:a,class:{today:t.isToday(a),holiday:t.isHoliday(a)}},[t._v("\n          "+t._s(t._f("luxon:format")(a,"d"))+"\n        ")])})],2)]),t._v(" "),[n("tbody",[n("tr",{staticClass:"category"},[n("td"),t._v(" "),n("td",[t._v("1.")]),t._v(" "),n("td",[t._v("Внутренний ремонт")]),t._v(" "),n("td",[t._v("начало")]),t._v(" "),n("td",[t._v("конец")]),t._v(" "),n("td",[t._v("дней")]),t._v(" "),n("td",{staticClass:"spacer",attrs:{colspan:t.days.length}})]),t._v(" "),t._l(t.jobs,function(a,s){return n("tr",{key:s},[n("td",{staticClass:"check-btn"},[a.done?n("v-btn",{attrs:{small:"",icon:""}},[n("v-icon",{attrs:{small:""}},[t._v("check_circle")])],1):n("v-tooltip",{attrs:{bottom:""}},[n("v-btn",{attrs:{slot:"activator",small:"",icon:""},on:{click:function(t){a.done=!0}},slot:"activator"},[n("v-icon",{attrs:{small:"",color:"grey"}},[t._v("autorenew")])],1),t._v(" "),n("span",[t._v("Пометить как выполненное")])],1)],1),t._v(" "),n("td",{staticClass:"descr"},[t._v("1."+t._s(s+1)+".")]),t._v(" "),n("td",{staticClass:"descr name"},[t._v(t._s(a.name))]),t._v(" "),n("td",{staticClass:"descr date"},[t._v(t._s(t._f("luxon:locale")(a.startISO,"d m yyyy")))]),t._v(" "),n("td",{staticClass:"descr date"},[t._v(t._s(t._f("luxon:locale")(a.finishISO,"d m yyyy")))]),t._v(" "),n("td",{staticClass:"descr",class:a.status},[t._v("\n            "+t._s(a.days)+"\n            "),n("v-tooltip",{attrs:{bottom:""}},[n("v-icon",{attrs:{slot:"activator",small:""},slot:"activator"},[t._v("contact_support")]),t._v(" "),n("span",[t._v(t._s(t.statuses[a.status]))])],1)],1),t._v(" "),t._l(t.days,function(s,e){return n("td",{key:e,class:[t.isJob(s,a),{holiday:t.isHoliday(s),today:t.isToday(s)}],attrs:{title:a.name}})})],2)})],2)]],2)]):t._e()},[],!1,null,"06d7c82a",null);o.options.__file="diagram.vue";a.a=o.exports},157:function(t,a,n){var s=n(182);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,n(23).default)("b27a208c",s,!0,{})},181:function(t,a,n){"use strict";var s=n(157);n.n(s).a},182:function(t,a,n){(t.exports=n(22)(!1)).push([t.i,"",""])},233:function(t,a,n){"use strict";n.r(a);var s={components:{diagram:n(153).a},data:function(){return{data:[{id:12,startDate:1545486174847,finishDate:1547177374847,name:"Штукатурные работы",done:!1},{id:15,startDate:1544794974847,finishDate:1547177374847,name:"Покраска",done:!1},{id:26,startDate:1543754574847,finishDate:1544727374847,name:"Уборка",done:!0}]}}},e=(n(181),n(3)),i=Object(e.a)(s,function(){var t=this.$createElement,a=this._self._c||t;return a("v-container",{attrs:{"grid-list-md":"","pa-0":""}},[a("card",{attrs:{title:"Диаграмма"}},[a("diagram",{attrs:{data:this.data}})],1)],1)},[],!1,null,null,null);i.options.__file="diagram.vue";a.default=i.exports}}]);